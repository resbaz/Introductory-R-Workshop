<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="pandoc">
    <title>Research Platforms: R for reproducible scientific analysis</title>
    <link rel="shortcut icon" type="image/x-icon" href="img/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap.css"  />
    <link rel="stylesheet" type="text/css" href="css/swc.css" />
    <link rel="alternate" type="application/rss+xml" title="ResBaz" href="melbourne.resbaz.edu.au"/>
    <link rel="alternate" type="application/rss+xml" title="ResBaz" href="melbourne.resbaz.edu.au"/>
    <meta charset="UTF-8" />
    <meta http-equiv="last-modified" content="{{site.timestamp}}" />
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body class="lesson">
    <div class="container card">
      <div class="banner">
        <a href="http://melbourne.resbaz.edu.au/" title="ResBaz">
          <img alt="ResBaz banner" src="img/ResBaz-banner.png"/>
        </a>
      </div>
      <article>
      <div class="row">
        <div class="col-md-10 col-md-offset-1">
                    <a href="index.html"><h1 class="title">R for reproducible scientific analysis</h1></a>
          <h2 class="subtitle">Writing reports with R markdown</h2>
          <p>As a tool for analysing and manipulating data, R provides a lean and proficient experience where every part in the process is represented by code that can be run and rerun to produce consistent results. This is an important advantage of the R system; instructions at every step can be noted and commented so a reader knows what purpose each serves, and an analysis can be reproduced by someone else by running the same code on the data.</p>
<p>Presenting your results can be tricky however, as the output generated by R isn’t necessarily intuitive to the casual observer. Additionally, manually saving plots and pasting bits of text from R to a document adds extra steps requiring time to redo whenever the data is updated potentially leading to the introduction of errors.</p>
<p><a href="http://rmarkdown.rstudio.com/">R markdown</a> is a system where reports and documents can be created from text and code. It is a flexible way of generating files directly from your analysed data to produce something in a format that you can present to colleagues, supervisors and audiences.</p>
<h1 id="what-is-r-markdown">What is R markdown?</h1>
<p>R markdown is a package within R that parses your text and code to a markdown format, which can be then converted to other formats using pandoc.</p>
<p>Rmd -&gt; knitr -&gt; markdown -&gt; pandoc -&gt; html/pdf/slides/txt/doc</p>
<p>As with standard R scripts, being written in a unicode format allows you to use any text editor to view and edit R markdown documents; you are not forced into using one particular program, and it will work across operating systems. It also fits nicely into version control systems like git, allowing you to keep a record of and track changes.</p>
<h3 id="some-definitions">Some definitions</h3>
<p><a href="https://en.wikipedia.org/wiki/Markdown">markdown</a>: A lightweight markup language with plain text formatting syntax. Rich text can be formatted using tags: <code>*italics*</code> for <em>italics</em>.</p>
<p><a href="http://pandoc.org">pandoc</a>: Software to convert files from one markup format into another.</p>
<h1 id="getting-started">Getting started</h1>
<p>R markdown is well supported in the RStudio platform, available with a default installation. Output to particular formats may need installation of <a href="http://pandoc.org/installing.html">pandoc</a> or <a href="https://www.latex-project.org/get/">LaTeX</a>.</p>
<p>File &gt; New File &gt; R Markdown</p>
<p>Otherwise, R markdown can be installed using the command <code>install.packages(&quot;rmarkdown&quot;)</code></p>
<p>Within RStudio, a template report is typically created including text, code and plots. You can safely remove or replace sections that you don’t need.</p>
<h1 id="rmarkdown-structure">Rmarkdown structure</h1>
<p>There are three important types of structures within a R markdown document</p>
<ul>
<li>YAML</li>
<li>Text</li>
<li>Code</li>
</ul>
<h3 id="yaml">YAML</h3>
<p>“YAML ain’t markup language”</p>
<p>Positioned at the beginning of the document, the YAML header is a section where key-values are defined, representing certain terms as well as how the R markdown document will be processed are specified. The beginning and end of the YAML header are always denoted by three dashes (<code>---</code>).</p>
<p>Theming the document, setting the output format and whether certain elements should be generated (such as menus) is set here.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">---</span>
title<span class="op">:</span><span class="st"> &quot;Untitled&quot;</span>
output<span class="op">:</span><span class="st"> </span>html_document
<span class="op">---</span></code></pre></div>
<h3 id="text">Text</h3>
<p>Explanatory text can be written throughout the document in a markdown format. Markdown is widely used, originally designed for translating plain text to HTML commands for websites. It also has many applications, from forums and discussion sites to laying out READMEs on Github.</p>
<p>How rich text is formatted is defined by certain symbols. For example, previously we used asterisks (<code>*</code>) to mark out the text to be <em>italicised</em>. <strong>Bold text</strong> can be marked out with two asterisks (<code>**</code>) on either side of the text (<code>**Bold text**</code>).</p>
<h3 id="code">Code</h3>
<p>Code within a R markdown document can be placed either inline or in a block, which R knows then to process. Where code begins and ends is defined by the grave symbol (<code>`</code>). As R markdown can process different languages (e.g. R and python), the language in which your code is written should be specified to tell R how to handle it.</p>
<p>Inline code is placed within a paragraph, and formatted as such. For example, to display all numbers from <code>1:4</code>, use <code>`r 1:4`</code> to produce: 1, 2, 3, 4.</p>
<p>Code chunks are specified using three grave symbols at the beginning and at the end (<code>```</code>). Again, the language of the code needs to be specified at the start of the code block: <code>```{r}</code>. To redo the previous example in a code chunk:</p>
<pre><code>```{r}
1:4
```</code></pre>
<p>This will produce the following output:</p>
<pre><code>## [1] 1 2 3 4</code></pre>
<h1 id="bringing-it-together">Bringing it together</h1>
<p>When your document is ready, signal R to render it by clicking the “knit” button at the top of the RStudio interface. By default, a HTML file (a webpage) is generated, but you have the option of producing other formats as well.</p>
<p>Altenatively, the following command can be run in the R session window.</p>
<p><code>render(&quot;yourfile.Rmd&quot;)</code></p>
<h3 id="exercise-1">Exercise 1</h3>
<p>Produce a report using R markdown with one of the plots you previously generated using <code>ggplot2</code>. In a paragraph accompanying your graphic, emphasise the main findings of your analysis.</p>
<p>NB: All data used to generate the report must be read in (and transformed if necessary) within the R markdown document</p>
<h1 id="customisation">Customisation</h1>
<p>Options exist for customising each of the structures in R markdown.</p>
<h3 id="yaml-1">YAML</h3>
<p>There are a number of options supported by the R markdown-pandoc system to set within the YAML header, at the beginning of your document. Some of these are only available for certain formats (a navigation bar for example is available for websites, but not standard documents). A list of them is available <a href="http://pandoc.org/MANUAL.html#variables-set-by-pandoc">from the pandoc reference guide</a>.</p>
<p>Specifying the output format is important to define format-specific variables and how R markdown should handle them. A list of these is available <a href="http://rmarkdown.rstudio.com/lesson-9.html">from the RStudio R markdown documentation</a>; some of the more common ones might include:</p>
<ul>
<li>html_document - HTML documents</li>
<li>word_document - Microsoft Word compatible document</li>
<li>pdf_document - PDF document, requires installation of LaTeX</li>
<li>ioslides_presentation - HTML based presentation</li>
</ul>
<p>The flexibility of R markdown lends itself well to the numerous applications. Modifying the appearance tends to be output specific, so consult the relevant output format documentation in the Rstudio R markdown documentation above.</p>
<h3 id="text-and-tables">Text and tables</h3>
<p>Customisation of text follows standard markdown conventions, a quick summary available <a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet">here</a>.</p>
<p>Greek symbols and maths is supported using MathJax, and can be inserted inline (within a paragraph) or within it’s own block. Surround your inline maths with a dollar sign (<code>$</code>) to indicate to R that you would like to process it as such. For example, <code>$e = mc^2$</code> will produce <span class="math inline">\(e = mc^2\)</span>. Alternatively, in surround it with two dollar signs (<code>$$</code>) to produce:</p>
<p><span class="math display">\[e = mc^2\]</span></p>
<p>Within R, you’re often dealing with tabulated data (such as that from spreadsheets). You’re able to quite easily display the raw data as code output</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Display the first few rows of the mtcars dataset</span>
<span class="kw">head</span>(mtcars)</code></pre></div>
<pre><code>##                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
## Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</code></pre>
<p>Alternatively, R markdown is able to process it to produce a nicely formatted version of the table. Within the markdown specifications, tables are defined by producing within your code a specifically laid out manner, with your headings and columns separated by <code>-</code> and <code>|</code> symbols respectively.</p>
<pre><code>| Heading 1   | Heading 2   | Heading 3   |
|-------------|-------------|-------------|
| Col 1 row 1 | Col 2 row 1 | Col 3 row 1 |
| Col 1 row 2 | Col 2 row 2 | Col 3 row 2 |</code></pre>
<p>Doing this manually for your data would be tedious and defeat the R markdown-will-make-generating-reports-easier purpose we’ve been seeking. Thankfully, there are ways of programmatically producing the required format using packages! Popular ways of doing this include <code>kable</code> (within the <code>knitr</code> package), <code>xtables</code> and <code>pander</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Display the first few rows of the mtcars dataset using kable</span>
<span class="kw">library</span>(knitr)
<span class="kw">kable</span>(<span class="kw">head</span>(mtcars))</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">mpg</th>
<th align="right">cyl</th>
<th align="right">disp</th>
<th align="right">hp</th>
<th align="right">drat</th>
<th align="right">wt</th>
<th align="right">qsec</th>
<th align="right">vs</th>
<th align="right">am</th>
<th align="right">gear</th>
<th align="right">carb</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Mazda RX4</td>
<td align="right">21.0</td>
<td align="right">6</td>
<td align="right">160</td>
<td align="right">110</td>
<td align="right">3.90</td>
<td align="right">2.620</td>
<td align="right">16.46</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">4</td>
<td align="right">4</td>
</tr>
<tr class="even">
<td align="left">Mazda RX4 Wag</td>
<td align="right">21.0</td>
<td align="right">6</td>
<td align="right">160</td>
<td align="right">110</td>
<td align="right">3.90</td>
<td align="right">2.875</td>
<td align="right">17.02</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">4</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="left">Datsun 710</td>
<td align="right">22.8</td>
<td align="right">4</td>
<td align="right">108</td>
<td align="right">93</td>
<td align="right">3.85</td>
<td align="right">2.320</td>
<td align="right">18.61</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">4</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Hornet 4 Drive</td>
<td align="right">21.4</td>
<td align="right">6</td>
<td align="right">258</td>
<td align="right">110</td>
<td align="right">3.08</td>
<td align="right">3.215</td>
<td align="right">19.44</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Hornet Sportabout</td>
<td align="right">18.7</td>
<td align="right">8</td>
<td align="right">360</td>
<td align="right">175</td>
<td align="right">3.15</td>
<td align="right">3.440</td>
<td align="right">17.02</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">Valiant</td>
<td align="right">18.1</td>
<td align="right">6</td>
<td align="right">225</td>
<td align="right">105</td>
<td align="right">2.76</td>
<td align="right">3.460</td>
<td align="right">20.22</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
<h1 id="code-chunk-customisation">Code chunk customisation</h1>
<p>Naming code chunks can be useful for keeping tabs on them, and can be done with a label right after the language is specified:</p>
<p><code>```{r chunk1}</code></p>
<p>When initiating a code chunk, options can be set to define how a chunk should be processed and displayed. This is done within the brackets as you specify the language, with each option separated by a comma (<code>,</code>):</p>
<p><code>```{r, option1 = TRUE, option2 = FALSE}</code></p>
<p>A list of the available options and what each does is available from the <a href="https://www.rstudio.com/wp-content/uploads/2015/02/rmarkdown-cheatsheet.pdf">R markdown cheat sheet</a> and <a href="https://yihui.name/knitr/options/">knitr options</a>.</p>
<p>If you want an option specified for all chunks within a document, you can set it globally, using <code>opts_chunk$set();</code> within a code chunk.</p>
<pre><code>```{r}
opts_chunk$set(echo = FALSE)
```</code></pre>
<h1 id="resources">Resources</h1>
<ul>
<li><a href="http://rmarkdown.rstudio.com/lesson-1.html">R markdown by RStudio, getting started</a></li>
<li><a href="http://rmarkdown.rstudio.com/html_document_format.html">R markdown html documents</a></li>
<li><a href="https://www.rstudio.com/wp-content/uploads/2015/02/rmarkdown-cheatsheet.pdf">R markdown cheatsheet by RStudio</a></li>
</ul>
        </div>
      </div>
      </article>
    <!--  <div class="footer">
  <a class="label swc-blue-bg" href="http://software-carpentry.org">Software Carpentry</a>
  <a class="label swc-blue-bg" href="https://github.com/swcarpentry/lesson-template">Source</a>
  <a class="label swc-blue-bg" href="mailto:admin@software-carpentry.org">Contact</a>
  <a class="label swc-blue-bg" href="LICENSE.html">License</a>
</div> -->
    </div>
    <!-- Javascript placed at the end of the document so the pages load faster -->
    <script src="http://software-carpentry.org/v5/js/jquery-1.9.1.min.js"></script>
    <script src="css/bootstrap/bootstrap-js/bootstrap.js"></script>
    <script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
    <script src="{{page.root}}/js/jquery-1.9.1.min.js"></script>
    <script src="{{page.root}}/css/bootstrap/bootstrap-js/bootstrap.js"></script>
  </body>
</html>
